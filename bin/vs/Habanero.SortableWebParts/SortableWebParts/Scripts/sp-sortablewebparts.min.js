/*!
 * Sortable Web Parts for SharePoint 2013
 * Christopher Parsons <cparsons@habaneroconsulting.com>
 * Habanero Consulting Group - Licensed under MIT
 */
!function(a,b,c,d){"use strict";var e,f={},g={placeholder:".ui-sortable-placeholder",webpart:".ms-webpartzone-cell",zone:".ms-SPZone"},h="MSOZone_EmptyZoneCell",i=g.placeholder+" + "+g.webpart+", "+g.placeholder+" + #"+h;f.prototypeSetup=function(){HTMLDivElement.prototype.swapNode=function(b){var c=a(b);c.attr("style",""),this.outerHTML=b.outerHTML,c.remove()},HTMLDivElement.prototype.removeNode=function(){return!1}},f.setup=function(){f.prototypeSetup(),e={body:a("body"),webpartZone:a(g.zone),webparts:a(g.webpart)},e.webpartZone.sortable({connectWith:g.zone,handle:"span.js-webpart-titleCell",items:g.webpart}),e.webparts.on("mouseup",function(){var c=a(g.placeholder)[0],d=c.previousElementSibling;c&&d.id===h&&c.parentNode.insertBefore(c,d);var f=a(i)[0];f&&(b.MSOLayout_zoneDragOver=e.body[0],b.MSOLayout_currentDragMode="move",b.MSOLayout_iBar.setAttribute("goodDrop",!0),b.MSOLayout_MoveWebPart(this,f))})},f.isEditMode=function(){var b,c,d;return c="1"===a("#MSOLayout_InDesignMode").val(),d="Edit"===a("#_wikiPageMode").val(),b=c||d},f.init=function(){HTMLDivElement.prototype.dragDrop===d&&f.isEditMode()&&a().sortable&&f.setup()},a(f.init)}(jQuery,window,document);